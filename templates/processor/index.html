{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Processador de Imagens - Editor Inteligente</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="container">
        <!-- Header with cognitive clarity -->
        <header class="header">
            <h1 class="header__title">
                <svg class="header__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <circle cx="8.5" cy="8.5" r="1.5"/>
                    <polyline points="21 15 16 10 5 21"/>
                </svg>
                Editor de Imagens
            </h1>
            <p class="header__subtitle">Transforme suas imagens com controles intuitivos</p>
        </header>

        <!-- Upload Section - Clear affordance -->
        <section class="upload-section" id="uploadSection">
            <div class="upload-area" id="uploadArea">
                <input type="file" id="imageInput" accept="image/*" class="upload-area__input">
                <label for="imageInput" class="upload-area__label">
                    <svg class="upload-area__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    <span class="upload-area__text">Clique ou arraste uma imagem aqui</span>
                    <span class="upload-area__hint">JPG, PNG ou GIF (máx. 10MB)</span>
                </label>
            </div>
        </section>

        <!-- Main Editor - Hidden until image uploaded -->
        <main class="editor" id="editor" style="display: none;">
            <!-- Image Display with Before/After -->
            <section class="image-display">
                <div class="image-display__container">
                    <img id="currentImage" class="image-display__img" alt="Imagem processada">
                    <canvas id="editorCanvas" style="display: none;"></canvas>
                    <div class="image-display__info" id="imageInfo"></div>
                </div>
            </section>

            <!-- Control Panel - Ergonomic layout -->
            <section class="controls">
                <h2 class="controls__title">Ajustes em Tempo Real</h2>
                <p class="controls__subtitle">Todos os ajustes são aplicados sobre a imagem original</p>

                <!-- Grayscale Toggle - Clear binary choice -->
                <div class="control-group">
                    <button class="control-btn control-btn--toggle" id="grayscaleToggle">
                        <svg class="control-btn__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 2v20"/>
                        </svg>
                        <span>Escala de Cinza</span>
                    </button>
                </div>

                <!-- Saturation Control (0-200%) -->
                <div class="control-group">
                    <label class="control-label">
                        <svg class="control-label__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                        </svg>
                        <span>Saturação</span>
                        <span class="control-value" id="saturationValue">100%</span>
                    </label>
                    <input type="range" class="control-slider" id="saturationSlider"
                           min="0" max="200" step="1" value="100">
                    <div class="control-markers">
                        <span>0%</span>
                        <span>100%</span>
                        <span>200%</span>
                    </div>
                </div>

                <!-- Brightness Control -->
                <div class="control-group">
                    <label class="control-label">
                        <svg class="control-label__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="23"/>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                            <line x1="1" y1="12" x2="3" y2="12"/>
                            <line x1="21" y1="12" x2="23" y2="12"/>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                        </svg>
                        <span>Brilho</span>
                        <span class="control-value" id="brightnessValue">0</span>
                    </label>
                    <input type="range" class="control-slider" id="brightnessSlider"
                           min="-100" max="100" step="1" value="0">
                    <div class="control-markers">
                        <span>-100</span>
                        <span>0</span>
                        <span>+100</span>
                    </div>
                </div>

                <!-- Contrast Control -->
                <div class="control-group">
                    <label class="control-label">
                        <svg class="control-label__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 2a10 10 0 0 0 0 20z"/>
                        </svg>
                        <span>Contraste</span>
                        <span class="control-value" id="contrastValue">0</span>
                    </label>
                    <input type="range" class="control-slider" id="contrastSlider"
                           min="-100" max="100" step="1" value="0">
                    <div class="control-markers">
                        <span>-100</span>
                        <span>0</span>
                        <span>+100</span>
                    </div>
                </div>

                <!-- Sharpness Control -->
                <div class="control-group">
                    <label class="control-label">
                        <svg class="control-label__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                        </svg>
                        <span>Nitidez</span>
                        <span class="control-value" id="sharpnessValue">0</span>
                    </label>
                    <input type="range" class="control-slider" id="sharpnessSlider"
                           min="-100" max="100" step="1" value="0">
                    <div class="control-markers">
                        <span>-100</span>
                        <span>0</span>
                        <span>+100</span>
                    </div>
                </div>

                <!-- Blur Control -->
                <div class="control-group">
                    <label class="control-label">
                        <svg class="control-label__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="3" opacity="0.5"/>
                            <circle cx="12" cy="12" r="6" opacity="0.3"/>
                            <circle cx="12" cy="12" r="9" opacity="0.1"/>
                        </svg>
                        <span>Desfoque</span>
                        <span class="control-value" id="blurValue">0</span>
                    </label>
                    <input type="range" class="control-slider" id="blurSlider"
                           min="0" max="10" step="0.5" value="0">
                    <div class="control-markers">
                        <span>0</span>
                        <span>5</span>
                        <span>10</span>
                    </div>
                </div>

                <!-- Reset Button -->
                <div class="control-group">
                    <button class="control-btn control-btn--reset" id="resetBtn">
                        <svg class="control-btn__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                            <path d="M21 3v5h-5"/>
                            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                            <path d="M3 21v-5h5"/>
                        </svg>
                        <span>Resetar Todos os Ajustes</span>
                    </button>
                </div>
            </section>

            <!-- Timeline Section - Visual process history -->
            <section class="timeline">
                <div class="timeline__header">
                    <h2 class="timeline__title">Snapshots</h2>
                    <button class="timeline__save" id="saveSnapshotBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                            <polyline points="17 21 17 13 7 13 7 21"/>
                            <polyline points="7 3 7 8 15 8"/>
                        </svg>
                        Salvar Snapshot
                    </button>
                </div>
                <div class="timeline__track" id="timelineTrack">
                    <div class="timeline__item timeline__item--original">
                        <div class="timeline__dot"></div>
                        <div class="timeline__content">
                            <div class="timeline__label">Original</div>
                            <img class="timeline__preview" id="originalPreview" alt="Original">
                        </div>
                    </div>
                </div>
            </section>

            <!-- Action Buttons - Clear call to action -->
            <section class="actions">
                <button class="action-btn action-btn--secondary" id="newImageBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    Nova Imagem
                </button>
                <button class="action-btn action-btn--primary" id="downloadBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Baixar Imagem
                </button>
            </section>
        </main>

        <!-- Loading Indicator -->
        <div class="loading" id="loading" style="display: none;">
            <div class="loading__spinner"></div>
            <p class="loading__text">Processando...</p>
        </div>

        <!-- Toast Notifications -->
        <div class="toast" id="toast"></div>
    </div>

    <script src="{% static 'js/image-processor-client.js' %}"></script>
    <script src="{% static 'js/app.js' %}"></script>
</body>
</html>
